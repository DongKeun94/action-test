name: Deploy to SPC

on:
  push:
    branches:
      - master

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: SPC OIDC Login
        uses: DongKeun94/spc-oidc@master
        with:
          role_arn: ${{ secrets.SPC_ROLE_ARN }}
          sts_endpoint: https://sts.samsungspc.com

      - name: Upload TXT files to SPC S3
        run: |
          
          aws s3 cp *.txt s3://dsung-dx-test-2/oidcTest/ \
            --endpoint-url https://s3.us-east-1.samsungspc.com \
            --region us-east-1
